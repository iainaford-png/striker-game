<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Striker Career (ZX-ish)</title>
<style>
  :root{
    --bg:#0b1220; --panel:#0f1b34; --fg:#e7f0ff; --muted:#a9b7d6; --accent:#4fd1c5;
    --good:#6ee7b7; --bad:#fb7185; --line:rgba(255,255,255,.14);
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#071022,#0b1220);color:var(--fg);
       font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:920px;margin:0 auto;padding:16px}
  header{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:12px}
  header h1{font-size:18px;margin:0;letter-spacing:.3px}
  header .sub{color:var(--muted);font-size:13px}
  .pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;
        border:1px solid var(--line);background:rgba(255,255,255,.06);font-size:12px;color:var(--muted)}
  .row{display:grid;grid-template-columns:1.1fr .9fr;gap:12px}
  @media (max-width:860px){.row{grid-template-columns:1fr}}
  .card{background:rgba(15,27,52,.85);border:1px solid var(--line);border-radius:14px;padding:12px}
  .card h2{font-size:14px;margin:0 0 8px 0;color:#d9e6ff}
  .muted{color:var(--muted)}
  .divider{height:1px;background:rgba(255,255,255,.12);margin:10px 0}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width:520px){.grid2{grid-template-columns:1fr}}
  input,select{width:100%;padding:10px 10px;border-radius:10px;border:1px solid var(--line);
               background:#0b1736;color:var(--fg);outline:none}
  .btn{appearance:none;border:1px solid var(--line);background:#11224a;color:var(--fg);
       padding:10px 12px;border-radius:12px;font-weight:800;cursor:pointer}
  .btn:hover{border-color:rgba(255,255,255,.28)}
  .btn.primary{background:linear-gradient(180deg,#1d4ed8,#1e40af);border-color:rgba(255,255,255,.25)}
  .btn.bad{background:linear-gradient(180deg,#ef4444,#b91c1c)}
  .center{display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
  table{width:100%;border-collapse:collapse;font-size:13px}
  th,td{padding:7px 6px;border-bottom:1px solid rgba(255,255,255,.10);text-align:left}
  th{color:#cfe0ff;font-weight:900}
  td.right{text-align:right}
  .toast{margin-top:8px;color:var(--muted);font-size:13px;min-height:18px}
</style>
</head>

<body>
<div class="wrap">
  <header>
    <h1>âš½ Striker Career <span class="sub">(ZX-ish timing game)</span></h1>
    <span class="pill" id="pillCareer">Not started</span>
    <span class="pill" id="pillSeason">â€”</span>
    <span class="pill" id="pillForm">â€”</span>
  </header>

  <div class="row">
    <div class="card" id="cardMain">
      <h2>Loadingâ€¦</h2>
      <div class="muted">If this stays blank, your browser is blocking scripts.</div>
    </div>

    <div class="card" id="cardSide">
      <h2>How it works</h2>
      <p class="muted" style="margin:0;line-height:1.35">
        Step A: create your player + pick a club.<br>
        Next weâ€™ll add the 90-second match engine.
      </p>
    </div>
  </div>
</div>

<script>
/* ---------- DATA (Division 4 clubs) ---------- */
const DIV4 = [
  "Clayton Vale","Ridgefield United","Eastmoor Town","Birchington FC","Cedarford Athletic",
  "Langford Rovers","Oldhaven Borough","Marshgate Town","Wheatley City","Foxbury Albion"
];

/* ---------- HELPERS ---------- */
const $ = (id)=>document.getElementById(id);

function save(state){
  localStorage.setItem("strikerCareer_stageA", JSON.stringify(state));
}
function load(){
  try{
    const s = localStorage.getItem("strikerCareer_stageA");
    return s ? JSON.parse(s) : null;
  }catch(e){ return null; }
}
function wipe(){
  localStorage.removeItem("strikerCareer_stageA");
}

/* ---------- UI RENDER ---------- */
function setPills(state){
  if(!state){
    $("pillCareer").textContent = "Not started";
    $("pillSeason").textContent = "â€”";
    $("pillForm").textContent = "â€”";
    return;
  }
  $("pillCareer").textContent = `${state.playerName} â€¢ ${state.clubName}`;
  $("pillSeason").textContent = `Season ${state.seasonYear} â€¢ Division 4`;
  $("pillForm").textContent = `Form: â€”`;
}

function renderStart(){
  setPills(null);

  $("cardMain").innerHTML = `
    <h2>Start your career</h2>

    <div class="grid2">
      <div>
        <div class="muted">Player name</div>
        <input id="inpName" placeholder="e.g., Ian Ford" maxlength="24" />
      </div>
      <div>
        <div class="muted">Choose a Division 4 club</div>
        <select id="selClub"></select>
      </div>
    </div>

    <div class="divider"></div>

    <div class="center">
      <button class="btn primary" id="btnStart">Start Career</button>
      <button class="btn" id="btnContinue" disabled>Continue</button>
      <button class="btn bad" id="btnReset">Reset Save</button>
    </div>

    <div class="toast" id="toast"></div>
  `;

  $("selClub").innerHTML = DIV4.map(n=>`<option>${n}</option>`).join("");

  const existing = load();
  $("btnContinue").disabled = !existing;

  $("btnStart").onclick = ()=>{
    const name = ($("inpName").value || "").trim();
    const club = $("selClub").value;
    if(!name){
      $("toast").textContent = "Pop your player name in first ðŸ™‚";
      return;
    }
    const state = { playerName:name, clubName:club, seasonYear:1 };
    save(state);
    renderHub(state);
  };

  $("btnContinue").onclick = ()=>{
    const st = load();
    if(st) renderHub(st);
  };

  $("btnReset").onclick = ()=>{
    wipe();
    $("toast").textContent = "Save cleared.";
    $("btnContinue").disabled = true;
    setPills(null);
  };
}

function renderHub(state){
  setPills(state);

  $("cardMain").innerHTML = `
    <h2>Club Hub</h2>
    <div class="muted">Player: <b>${state.playerName}</b></div>
    <div class="muted">Club: <b>${state.clubName}</b> (Division 4)</div>

    <div class="divider"></div>

    <div class="center">
      <button class="btn primary" id="btnNext">Next: add Match Engine</button>
      <button class="btn" id="btnBack">Back</button>
      <button class="btn bad" id="btnReset2">Reset Save</button>
    </div>

    <div class="toast" id="toast2">
      Youâ€™re set. Next we wire the 90-second match and pointer timing.
    </div>
  `;

  $("cardSide").innerHTML = `
    <h2>Division 4 clubs</h2>
    <div class="muted" style="margin-bottom:6px">(${DIV4.length} teams)</div>
    <div style="overflow:auto;max-height:520px">
      <table>
        <thead><tr><th>#</th><th>Club</th></tr></thead>
        <tbody>
          ${DIV4.map((n,i)=>`
            <tr ${n===state.clubName ? `style="background:rgba(79,209,197,.12)"` : ""}>
              <td class="right">${i+1}</td><td>${n}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
    </div>
  `;

  $("btnNext").onclick = ()=>{
    $("toast2").textContent = "Nice. Next message me â€˜Ready for Match Engineâ€™ and Iâ€™ll drop in the next code chunk.";
  };
  $("btnBack").onclick = renderStart;
  $("btnReset2").onclick = ()=>{ wipe(); renderStart(); };
}

/* ---------- BOOT (with error display) ---------- */
window.addEventListener("error",(e)=>{
  $("cardMain").innerHTML = `
    <h2>Script error ðŸ˜¬</h2>
    <div class="muted">Your page loaded, but the JavaScript hit an error.</div>
    <div class="divider"></div>
    <div class="muted"><b>${(e && e.message) ? e.message : "Unknown error"}</b></div>
    <div class="muted">Tip: refresh with <b>?v=99</b> to bypass cache.</div>
  `;
});

(function init(){
  const st = load();
  if(st) renderHub(st);
  else renderStart();
})();
</script>
</body>
</html>
